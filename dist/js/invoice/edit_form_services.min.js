const changeValueInHiddenInput=(e,t)=>{document.querySelector(t).value=e},parseAmountToCount=e=>("string"==typeof e&&(e=e.replace(",","."),e=parseFloat(e)),e%1==0&&(e=e.toFixed(2),e=parseFloat(e)),e),convertNumtoAmount=(e,t)=>(e=e.toFixed(2),e=(e+=" "+t).replace(".",",")),addNewServiceBtn=document.querySelector(".new-service-btn"),createNewService=e=>{e.preventDefault();var e=document.querySelector("#services-table tbody"),t=e.querySelectorAll("tr").length,n=document.createElement("tr"),a=document.createElement("td"),r=(a.innerHTML=`<span class="service-title--mobile">No.: </span><span class="service-item-number"></span>
<input hidden class="position-hidden-input" type="text" name="position[${t}]" value=""></input>`,document.createElement("td")),s=(r.innerHTML=`<span class="service-title--mobile">Item / service: </span>
<input class="service-item-name"  type="text" name="service_name[${t}]">`,document.createElement("td")),l=(s.innerHTML=`<span class="service-title--mobile">Service code: </span>
<input class="service-item-code" type="text" name="service_code[${t}]">`,document.createElement("td")),i=(l.innerHTML=`<span class="service-title--mobile">Quantity: </span>
<input type="number" value="1" min="0" class="service-item-amount" name="quantity[${t}]">`,document.createElement("td")),c=(i.innerHTML=`<span class="service-title--mobile">Net price (PLN): </span>
<input type="number" min="0" value="0.00" class="service-item-net-value" name="item_net_price[${t}]" step=".01">`,document.createElement("td")),o=(c.innerHTML=`<span class="service-title--mobile">Tax: </span>
<select class="service-item-tax" name="service_tax[${t}]">
	<option value="0">tax-free</option>
	<option value="0.08">8%</option>
	<option value="0.23">23%</option>
</select>`,document.createElement("td")),u=(o.innerHTML=`<span class="service-title--mobile">Net sum (PLN): </span>
<input type="text" value="0.00 PLN" class="service-item-net-sum" name="service_total_net[${t}]" readonly>`,document.createElement("td")),t=(u.innerHTML=`<span class="service-title--mobile">Gross sum (PLN): </span>
<input type="text" value="0.00 PLN" class="service-item-gross-sum" name="service_total_gross[${t}]" readonly>`,document.createElement("td"));t.innerHTML=`<button class="delete-btn">
<i class="fa-solid fa-trash"></i>Delete</button>`,n.append(a,r,s,l,i,c,o,u,t),e.append(n),updateServicesTable()},updateServiceTr=(addNewServiceBtn.addEventListener("click",e=>createNewService(e)),e=>{var t=e.querySelector(".service-item-amount").value,n=e.querySelector(".service-item-net-value").value,a=e.querySelector(".service-item-tax").value,r=e.querySelector(".service-item-net-sum"),e=e.querySelector(".service-item-gross-sum"),t=(r.value=convertNumtoAmount(t*n,"PLN"),parseAmountToCount(a)*parseAmountToCount(r.value)+parseAmountToCount(r.value));e.value=convertNumtoAmount(t,"PLN"),calculateTableSummary()}),deleteServiceItem=(document.addEventListener("input",e=>{(e.target.classList.contains("service-item-amount")||e.target.classList.contains("service-item-net-value")||e.target.classList.contains("service-item-tax"))&&updateServiceTr(e.target.parentElement.parentElement)}),e=>{e.outerHTML="",updateServicesTable()}),updateServicesTable=(document.addEventListener("click",e=>{e.target.classList.contains("delete-btn")&&deleteServiceItem(e.target.parentElement.parentElement)}),document.addEventListener("keydown",e=>{"Enter"===e.key&&"textarea"!==e.target.localName&&e.preventDefault()}),()=>{updateItemsNumbers(),showEmptyInfo(),calculateTableSummary()}),updateItemsNumbers=()=>{var t=document.querySelectorAll(".invoice-edit__form-box-services-table .service-item-number"),n=document.querySelectorAll(".position-hidden-input");for(let e=0;e<t.length;e++)t[e].textContent=e+1;for(let e=0;e<n.length;e++)n[e].value=e+1},showEmptyInfo=()=>{var e=document.querySelectorAll("#services-table tbody tr");document.querySelector("#services-table tbody .empty-info").style.display=1===e.length?"grid":"none"},calculateTableSummary=()=>{sumUpValues(".service-item-net-sum",".invoice-total-net"),sumUpValues(".service-item-gross-sum",".invoice-total-gross")},sumUpValues=(e,t)=>{e=document.querySelectorAll(e),t=document.querySelector(t);let n=0;e.forEach(e=>{n+=parseFloat(e.value.replace(",","."))}),t.textContent=(n.toFixed(2)+" PLN").replace(".",","),updateAllHiddenInputValues()},updateAllHiddenInputValues=()=>{var e=document.querySelector(".invoice-total-gross"),e=parseAmountToCount(e.textContent),t=document.querySelector(".invoice-total-net"),t=parseAmountToCount(t.textContent);changeValueInHiddenInput(e,"#total-gross"),changeValueInHiddenInput(e,"#to-pay-numeric"),changeValueInHiddenInput(verbalNotation(e),"#to-pay-verbal"),changeValueInHiddenInput(t,"#total-net")};document.addEventListener("DOMContentLoaded",updateServicesTable);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW52b2ljZS9lZGl0X2Zvcm1fc2VydmljZXMubWluLmpzIiwic291cmNlcyI6WyJpbnZvaWNlL2VkaXRfZm9ybV9zZXJ2aWNlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gR0xPQkFMIEZVTkNUSU9OU1xyXG5cclxuLyogXHJcbmNoYW5nZVZhbHVlSW5IaWRkZW5JbnB1dCh2YWx1ZVN0cmluZywgaW5wdXRJZFN0cmluZylcclxuVGhpcyBmdW5jdGlvbiBjb21wbGV0ZXMgdGhlIHZhbHVlIGluIHRoZSBpbmRpY2F0ZWQgaW5wdXRlLlxyXG5JbiB0aGlzIGFwcGxpY2F0aW9uLCB0aGUgdmFsdWUgZnJvbSB0aGUgaGlkZGVuIGlucHV0cyB3aWxsIGxhdGVyIFxyXG5iZSBwYXNzZWQgdmlhIFBPU1QgbWV0aG9kIHRvIHRoZSBQSFAgc2NyaXB0LlxyXG4qL1xyXG5jb25zdCBjaGFuZ2VWYWx1ZUluSGlkZGVuSW5wdXQgPSAodmFsdWVTdHJpbmcsIGlucHV0SWRTdHJpbmcpID0+IHtcclxuXHRjb25zdCBpbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoaW5wdXRJZFN0cmluZyk7XHJcblx0aW5wdXQudmFsdWUgPSB2YWx1ZVN0cmluZztcclxufTtcclxuXHJcbi8qIFxyXG5wYXJzZUFtb3VudFRvQ291bnQodmFsdWUpXHJcblRoaXMgZnVuY3Rpb24gdGFrZXMgYW4gYW1vdW50IChzcmluZykgYW5kIGNvbnZlcnRzIGl0IHRvIGEgbnVtYmVyLlxyXG5FLmcuLiBcclxuJzEyLjk5IFBMTicgPj4+IDEyLjk5XHJcbicxNSBQTE4nID4+PiAxNVxyXG4qL1xyXG5jb25zdCBwYXJzZUFtb3VudFRvQ291bnQgPSAodmFsdWUpID0+IHtcclxuXHQvLyBpZiBzdHJpbmcgY29udmVydCB0byBudW1iZXJcclxuXHRpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xyXG5cdFx0dmFsdWUgPSB2YWx1ZS5yZXBsYWNlKCcsJywgJy4nKTtcclxuXHRcdHZhbHVlID0gcGFyc2VGbG9hdCh2YWx1ZSk7XHJcblx0fVxyXG5cclxuXHQvLyByb3VuZCB0byB0d28gZGVjaW1hbCBwbGFjZXNcclxuXHRpZiAodmFsdWUgJSAxID09PSAwKSB7XHJcblx0XHR2YWx1ZSA9IHZhbHVlLnRvRml4ZWQoMik7IC8vIGNoYW5nZXMgdG8gc3RyaW5nXHJcblx0XHR2YWx1ZSA9IHBhcnNlRmxvYXQodmFsdWUpO1xyXG5cdH1cclxuXHJcblx0cmV0dXJuIHZhbHVlO1xyXG59O1xyXG5cclxuLypcclxuY29udmVydE51bXRvQW1vdW50KG51bWJlciwgc3RyaW5nKVxyXG5UaGlzIGZ1bmN0aW9uIHRha2VzIGEgbnVtYmVyLCByb3VuZHMgaXQgdG8gdHdvIGRlY2ltYWwgcGxhY2VzLCBcclxuYWRkcyBhIGN1cnJlbmN5IG5vdGF0aW9uIGFuZCBjb252ZXJ0cyB0aGUgcGVyaW9kIHRvIGEgY29tbWFcclxuKi9cclxuY29uc3QgY29udmVydE51bXRvQW1vdW50ID0gKG51bSwgY3VycmVuY3lTdHJpbmcpID0+IHtcclxuXHRudW0gPSBudW0udG9GaXhlZCgyKTtcclxuXHRudW0gKz0gJyAnICsgY3VycmVuY3lTdHJpbmc7XHJcblx0bnVtID0gbnVtLnJlcGxhY2UoJy4nLCAnLCcpO1xyXG5cclxuXHRyZXR1cm4gbnVtO1xyXG59O1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIERJU1BMQVkgSU5GTyBXSEVOIFRCT0RZIElTIEVNUFRZXHJcblxyXG5jb25zdCBhZGROZXdTZXJ2aWNlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5ldy1zZXJ2aWNlLWJ0bicpO1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gQUREIFNFUlZJQ0UgQUZURVIgQ0xJQ0sgVEhFXCJBRERcIiBCVVRUT05cclxuXHJcbmNvbnN0IGNyZWF0ZU5ld1NlcnZpY2UgPSAoZSkgPT4ge1xyXG5cdGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcblx0Y29uc3Qgc2VydmljZXNUYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzZXJ2aWNlcy10YWJsZSB0Ym9keScpO1xyXG5cdGNvbnN0IHNlcnZpY2VzTGVuZ3RoID0gc2VydmljZXNUYm9keS5xdWVyeVNlbGVjdG9yQWxsKCd0cicpLmxlbmd0aDtcclxuXHJcblx0Y29uc3QgbmV3SXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XHJcblx0Y29uc3QgaXRlbU5vU3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XHJcblx0aXRlbU5vU3Bhbi5pbm5lckhUTUwgPSBgPHNwYW4gY2xhc3M9XCJzZXJ2aWNlLXRpdGxlLS1tb2JpbGVcIj5Oby46IDwvc3Bhbj48c3BhbiBjbGFzcz1cInNlcnZpY2UtaXRlbS1udW1iZXJcIj48L3NwYW4+XHJcbjxpbnB1dCBoaWRkZW4gY2xhc3M9XCJwb3NpdGlvbi1oaWRkZW4taW5wdXRcIiB0eXBlPVwidGV4dFwiIG5hbWU9XCJwb3NpdGlvblske3NlcnZpY2VzTGVuZ3RofV1cIiB2YWx1ZT1cIlwiPjwvaW5wdXQ+YDtcclxuXHJcblx0Y29uc3Qgc2VydmljZU5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xyXG5cdHNlcnZpY2VOYW1lLmlubmVySFRNTCA9IGA8c3BhbiBjbGFzcz1cInNlcnZpY2UtdGl0bGUtLW1vYmlsZVwiPkl0ZW0gLyBzZXJ2aWNlOiA8L3NwYW4+XHJcbjxpbnB1dCBjbGFzcz1cInNlcnZpY2UtaXRlbS1uYW1lXCIgIHR5cGU9XCJ0ZXh0XCIgbmFtZT1cInNlcnZpY2VfbmFtZVske3NlcnZpY2VzTGVuZ3RofV1cIj5gO1xyXG5cclxuXHRjb25zdCBhY3Rpdml0eUNvZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xyXG5cdGFjdGl2aXR5Q29kZS5pbm5lckhUTUwgPSBgPHNwYW4gY2xhc3M9XCJzZXJ2aWNlLXRpdGxlLS1tb2JpbGVcIj5TZXJ2aWNlIGNvZGU6IDwvc3Bhbj5cclxuPGlucHV0IGNsYXNzPVwic2VydmljZS1pdGVtLWNvZGVcIiB0eXBlPVwidGV4dFwiIG5hbWU9XCJzZXJ2aWNlX2NvZGVbJHtzZXJ2aWNlc0xlbmd0aH1dXCI+YDtcclxuXHJcblx0Y29uc3QgYW1vdW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcclxuXHRhbW91bnQuaW5uZXJIVE1MID0gYDxzcGFuIGNsYXNzPVwic2VydmljZS10aXRsZS0tbW9iaWxlXCI+UXVhbnRpdHk6IDwvc3Bhbj5cclxuPGlucHV0IHR5cGU9XCJudW1iZXJcIiB2YWx1ZT1cIjFcIiBtaW49XCIwXCIgY2xhc3M9XCJzZXJ2aWNlLWl0ZW0tYW1vdW50XCIgbmFtZT1cInF1YW50aXR5WyR7c2VydmljZXNMZW5ndGh9XVwiPmA7XHJcblxyXG5cdGNvbnN0IG5ldFZhbHVlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcclxuXHRuZXRWYWx1ZS5pbm5lckhUTUwgPSBgPHNwYW4gY2xhc3M9XCJzZXJ2aWNlLXRpdGxlLS1tb2JpbGVcIj5OZXQgcHJpY2UgKFBMTik6IDwvc3Bhbj5cclxuPGlucHV0IHR5cGU9XCJudW1iZXJcIiBtaW49XCIwXCIgdmFsdWU9XCIwLjAwXCIgY2xhc3M9XCJzZXJ2aWNlLWl0ZW0tbmV0LXZhbHVlXCIgbmFtZT1cIml0ZW1fbmV0X3ByaWNlWyR7c2VydmljZXNMZW5ndGh9XVwiIHN0ZXA9XCIuMDFcIj5gO1xyXG5cclxuXHRjb25zdCB0YXhWYWx1ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XHJcblx0dGF4VmFsdWUuaW5uZXJIVE1MID0gYDxzcGFuIGNsYXNzPVwic2VydmljZS10aXRsZS0tbW9iaWxlXCI+VGF4OiA8L3NwYW4+XHJcbjxzZWxlY3QgY2xhc3M9XCJzZXJ2aWNlLWl0ZW0tdGF4XCIgbmFtZT1cInNlcnZpY2VfdGF4WyR7c2VydmljZXNMZW5ndGh9XVwiPlxyXG5cdDxvcHRpb24gdmFsdWU9XCIwXCI+dGF4LWZyZWU8L29wdGlvbj5cclxuXHQ8b3B0aW9uIHZhbHVlPVwiMC4wOFwiPjglPC9vcHRpb24+XHJcblx0PG9wdGlvbiB2YWx1ZT1cIjAuMjNcIj4yMyU8L29wdGlvbj5cclxuPC9zZWxlY3Q+YDtcclxuXHJcblx0Y29uc3QgbmV0U3VtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcclxuXHRuZXRTdW0uaW5uZXJIVE1MID0gYDxzcGFuIGNsYXNzPVwic2VydmljZS10aXRsZS0tbW9iaWxlXCI+TmV0IHN1bSAoUExOKTogPC9zcGFuPlxyXG48aW5wdXQgdHlwZT1cInRleHRcIiB2YWx1ZT1cIjAuMDAgUExOXCIgY2xhc3M9XCJzZXJ2aWNlLWl0ZW0tbmV0LXN1bVwiIG5hbWU9XCJzZXJ2aWNlX3RvdGFsX25ldFske3NlcnZpY2VzTGVuZ3RofV1cIiByZWFkb25seT5gO1xyXG5cclxuXHRjb25zdCBncm9zc1N1bSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XHJcblx0Z3Jvc3NTdW0uaW5uZXJIVE1MID0gYDxzcGFuIGNsYXNzPVwic2VydmljZS10aXRsZS0tbW9iaWxlXCI+R3Jvc3Mgc3VtIChQTE4pOiA8L3NwYW4+XHJcbjxpbnB1dCB0eXBlPVwidGV4dFwiIHZhbHVlPVwiMC4wMCBQTE5cIiBjbGFzcz1cInNlcnZpY2UtaXRlbS1ncm9zcy1zdW1cIiBuYW1lPVwic2VydmljZV90b3RhbF9ncm9zc1ske3NlcnZpY2VzTGVuZ3RofV1cIiByZWFkb25seT5gO1xyXG5cclxuXHRjb25zdCBkZWxldGVCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xyXG5cdGRlbGV0ZUJ0bi5pbm5lckhUTUwgPSBgPGJ1dHRvbiBjbGFzcz1cImRlbGV0ZS1idG5cIj5cclxuPGkgY2xhc3M9XCJmYS1zb2xpZCBmYS10cmFzaFwiPjwvaT5EZWxldGU8L2J1dHRvbj5gO1xyXG5cclxuXHRuZXdJdGVtLmFwcGVuZChcclxuXHRcdGl0ZW1Ob1NwYW4sXHJcblx0XHRzZXJ2aWNlTmFtZSxcclxuXHRcdGFjdGl2aXR5Q29kZSxcclxuXHRcdGFtb3VudCxcclxuXHRcdG5ldFZhbHVlLFxyXG5cdFx0dGF4VmFsdWUsXHJcblx0XHRuZXRTdW0sXHJcblx0XHRncm9zc1N1bSxcclxuXHRcdGRlbGV0ZUJ0blxyXG5cdCk7XHJcblx0c2VydmljZXNUYm9keS5hcHBlbmQobmV3SXRlbSk7XHJcblxyXG5cdHVwZGF0ZVNlcnZpY2VzVGFibGUoKTtcclxufTtcclxuXHJcbmFkZE5ld1NlcnZpY2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gY3JlYXRlTmV3U2VydmljZShlKSk7XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gQ0FMQ1VMQVRFIFZBTFVFUyBJTiBTRVJWSUNFIElURU1cclxuXHJcbmNvbnN0IHVwZGF0ZVNlcnZpY2VUciA9IChzZXJ2aWNlVHIpID0+IHtcclxuXHRjb25zdCBxdWFudGl0eSA9IHNlcnZpY2VUci5xdWVyeVNlbGVjdG9yKCcuc2VydmljZS1pdGVtLWFtb3VudCcpLnZhbHVlO1xyXG5cdGNvbnN0IG5ldFBlck9uZVBpZWNlID0gc2VydmljZVRyLnF1ZXJ5U2VsZWN0b3IoXHJcblx0XHQnLnNlcnZpY2UtaXRlbS1uZXQtdmFsdWUnXHJcblx0KS52YWx1ZTtcclxuXHRjb25zdCB0YXggPSBzZXJ2aWNlVHIucXVlcnlTZWxlY3RvcignLnNlcnZpY2UtaXRlbS10YXgnKS52YWx1ZTtcclxuXHRjb25zdCBuZXQgPSBzZXJ2aWNlVHIucXVlcnlTZWxlY3RvcignLnNlcnZpY2UtaXRlbS1uZXQtc3VtJyk7XHJcblx0Y29uc3QgZ3Jvc3MgPSBzZXJ2aWNlVHIucXVlcnlTZWxlY3RvcignLnNlcnZpY2UtaXRlbS1ncm9zcy1zdW0nKTtcclxuXHJcblx0Ly8gQ2FsY3VsYXRlIHRvdGFsIG5ldCBmb3Igb25lIHNlcnZpY2VUclxyXG5cdG5ldC52YWx1ZSA9IGNvbnZlcnROdW10b0Ftb3VudChxdWFudGl0eSAqIG5ldFBlck9uZVBpZWNlLCAnUExOJyk7XHJcblxyXG5cdC8vIENhbGN1bGF0ZSB0b3RhbCBncm9zcyBmb3Igb25lIHNlcnZpY2VUclxyXG5cdGNvbnN0IHRvdGFsR3Jvc3MgPVxyXG5cdFx0cGFyc2VBbW91bnRUb0NvdW50KHRheCkgKiBwYXJzZUFtb3VudFRvQ291bnQobmV0LnZhbHVlKSArXHJcblx0XHRwYXJzZUFtb3VudFRvQ291bnQobmV0LnZhbHVlKTtcclxuXHJcblx0Z3Jvc3MudmFsdWUgPSBjb252ZXJ0TnVtdG9BbW91bnQodG90YWxHcm9zcywgJ1BMTicpO1xyXG5cclxuXHQvLyBTdW0gdXAgdGhlIHRhYmxlXHJcblx0Y2FsY3VsYXRlVGFibGVTdW1tYXJ5KCk7XHJcbn07XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIChlKSA9PiB7XHJcblx0aWYgKFxyXG5cdFx0ZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdzZXJ2aWNlLWl0ZW0tYW1vdW50JykgfHxcclxuXHRcdGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnc2VydmljZS1pdGVtLW5ldC12YWx1ZScpIHx8XHJcblx0XHRlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3NlcnZpY2UtaXRlbS10YXgnKVxyXG5cdCkge1xyXG5cdFx0dXBkYXRlU2VydmljZVRyKGUudGFyZ2V0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudCk7XHJcblx0fVxyXG59KTtcclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBERUxFVEUgU0VSVklDRSBJVEVNXHJcbmNvbnN0IGRlbGV0ZVNlcnZpY2VJdGVtID0gKHNlcnZpY2VUcikgPT4ge1xyXG5cdHNlcnZpY2VUci5vdXRlckhUTUwgPSAnJztcclxuXHR1cGRhdGVTZXJ2aWNlc1RhYmxlKCk7XHJcbn07XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0aWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZGVsZXRlLWJ0bicpKSB7XHJcblx0XHRkZWxldGVTZXJ2aWNlSXRlbShlLnRhcmdldC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQpO1xyXG5cdH1cclxufSk7XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gQmxvY2sgdGhlIGZvcm0gZnJvbSBiZWluZyBzZW50IGF1dG9tYXRpY2FsbHkgYnkgcHJlc3NpbmcgdGhlIEVudGVyIGtleVxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHtcclxuXHRpZiAoZS5rZXkgPT09ICdFbnRlcicgJiYgZS50YXJnZXQubG9jYWxOYW1lICE9PSAndGV4dGFyZWEnKSB7XHJcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0fVxyXG59KTtcclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBVUERBVEUgREFUQSBJTiBTRVJWSUNFIFRBQkxFXHJcblxyXG5jb25zdCB1cGRhdGVTZXJ2aWNlc1RhYmxlID0gKCkgPT4ge1xyXG5cdHVwZGF0ZUl0ZW1zTnVtYmVycygpO1xyXG5cdHNob3dFbXB0eUluZm8oKTtcclxuXHRjYWxjdWxhdGVUYWJsZVN1bW1hcnkoKTtcclxufTtcclxuXHJcbmNvbnN0IHVwZGF0ZUl0ZW1zTnVtYmVycyA9ICgpID0+IHtcclxuXHRjb25zdCBpdGVtc05vU3BhbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFxyXG5cdFx0Jy5pbnZvaWNlLWVkaXRfX2Zvcm0tYm94LXNlcnZpY2VzLXRhYmxlIC5zZXJ2aWNlLWl0ZW0tbnVtYmVyJ1xyXG5cdCk7XHJcblxyXG5cdGNvbnN0IHBvc2l0aW9uSGlkZGVuSW5wdXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcclxuXHRcdCcucG9zaXRpb24taGlkZGVuLWlucHV0J1xyXG5cdCk7XHJcblxyXG5cdGZvciAobGV0IGkgPSAwOyBpIDwgaXRlbXNOb1NwYW5zLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRpdGVtc05vU3BhbnNbaV0udGV4dENvbnRlbnQgPSBpICsgMTtcclxuXHR9XHJcblxyXG5cdGZvciAobGV0IGkgPSAwOyBpIDwgcG9zaXRpb25IaWRkZW5JbnB1dHMubGVuZ3RoOyBpKyspIHtcclxuXHRcdHBvc2l0aW9uSGlkZGVuSW5wdXRzW2ldLnZhbHVlID0gaSArIDE7XHJcblx0fVxyXG59O1xyXG5cclxuY29uc3Qgc2hvd0VtcHR5SW5mbyA9ICgpID0+IHtcclxuXHRjb25zdCBzZXJ2aWNlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyNzZXJ2aWNlcy10YWJsZSB0Ym9keSB0cicpO1xyXG5cdGNvbnN0IGVtcHR5SW5mbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzZXJ2aWNlcy10YWJsZSB0Ym9keSAuZW1wdHktaW5mbycpO1xyXG5cdGVtcHR5SW5mby5zdHlsZS5kaXNwbGF5ID0gc2VydmljZXMubGVuZ3RoID09PSAxID8gJ2dyaWQnIDogJ25vbmUnO1xyXG59O1xyXG5cclxuY29uc3QgY2FsY3VsYXRlVGFibGVTdW1tYXJ5ID0gKCkgPT4ge1xyXG5cdHN1bVVwVmFsdWVzKCcuc2VydmljZS1pdGVtLW5ldC1zdW0nLCAnLmludm9pY2UtdG90YWwtbmV0Jyk7XHJcblx0c3VtVXBWYWx1ZXMoJy5zZXJ2aWNlLWl0ZW0tZ3Jvc3Mtc3VtJywgJy5pbnZvaWNlLXRvdGFsLWdyb3NzJyk7XHJcbn07XHJcblxyXG5jb25zdCBzdW1VcFZhbHVlcyA9IChpbnB1dHNBcnJTZWxlY3RvckFsbCwgb3V0cHV0U3BhblNlbGVjdG9yKSA9PiB7XHJcblx0Y29uc3QgaW5wdXRzQXJyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChpbnB1dHNBcnJTZWxlY3RvckFsbCk7XHJcblx0Y29uc3Qgb3V0cHV0U3BhbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iob3V0cHV0U3BhblNlbGVjdG9yKTtcclxuXHJcblx0bGV0IHN1bSA9IDA7XHJcblx0aW5wdXRzQXJyLmZvckVhY2goKGVsKSA9PiB7XHJcblx0XHRzdW0gKz0gcGFyc2VGbG9hdChlbC52YWx1ZS5yZXBsYWNlKCcsJywgJy4nKSk7XHJcblx0fSk7XHJcblxyXG5cdG91dHB1dFNwYW4udGV4dENvbnRlbnQgPSBgJHtzdW0udG9GaXhlZCgyKX0gUExOYC5yZXBsYWNlKCcuJywgJywnKTtcclxuXHR1cGRhdGVBbGxIaWRkZW5JbnB1dFZhbHVlcygpO1xyXG59O1xyXG5cclxuY29uc3QgdXBkYXRlQWxsSGlkZGVuSW5wdXRWYWx1ZXMgPSAoKSA9PiB7XHJcblx0Y29uc3QgdG90YWxHcm9zcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbnZvaWNlLXRvdGFsLWdyb3NzJyk7XHJcblx0Y29uc3QgdG90YWxHcm9zc051bSA9IHBhcnNlQW1vdW50VG9Db3VudCh0b3RhbEdyb3NzLnRleHRDb250ZW50KTtcclxuXHJcblx0Y29uc3QgdG90YWxOZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaW52b2ljZS10b3RhbC1uZXQnKTtcclxuXHRjb25zdCB0b3RhbE5ldE51bSA9IHBhcnNlQW1vdW50VG9Db3VudCh0b3RhbE5ldC50ZXh0Q29udGVudCk7XHJcblxyXG5cdGNoYW5nZVZhbHVlSW5IaWRkZW5JbnB1dCh0b3RhbEdyb3NzTnVtLCAnI3RvdGFsLWdyb3NzJyk7XHJcblx0Y2hhbmdlVmFsdWVJbkhpZGRlbklucHV0KHRvdGFsR3Jvc3NOdW0sICcjdG8tcGF5LW51bWVyaWMnKTtcclxuXHRjaGFuZ2VWYWx1ZUluSGlkZGVuSW5wdXQodmVyYmFsTm90YXRpb24odG90YWxHcm9zc051bSksICcjdG8tcGF5LXZlcmJhbCcpO1xyXG5cdGNoYW5nZVZhbHVlSW5IaWRkZW5JbnB1dCh0b3RhbE5ldE51bSwgJyN0b3RhbC1uZXQnKTtcclxufTtcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCB1cGRhdGVTZXJ2aWNlc1RhYmxlKTsiXSwibmFtZXMiOlsiY2hhbmdlVmFsdWVJbkhpZGRlbklucHV0IiwidmFsdWVTdHJpbmciLCJpbnB1dElkU3RyaW5nIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwidmFsdWUiLCJwYXJzZUFtb3VudFRvQ291bnQiLCJyZXBsYWNlIiwicGFyc2VGbG9hdCIsInRvRml4ZWQiLCJjb252ZXJ0TnVtdG9BbW91bnQiLCJudW0iLCJjdXJyZW5jeVN0cmluZyIsImFkZE5ld1NlcnZpY2VCdG4iLCJjcmVhdGVOZXdTZXJ2aWNlIiwiZSIsInByZXZlbnREZWZhdWx0Iiwic2VydmljZXNUYm9keSIsInNlcnZpY2VzTGVuZ3RoIiwicXVlcnlTZWxlY3RvckFsbCIsImxlbmd0aCIsIm5ld0l0ZW0iLCJjcmVhdGVFbGVtZW50IiwiaXRlbU5vU3BhbiIsInNlcnZpY2VOYW1lIiwiaW5uZXJIVE1MIiwiYWN0aXZpdHlDb2RlIiwiYW1vdW50IiwibmV0VmFsdWUiLCJ0YXhWYWx1ZSIsIm5ldFN1bSIsImdyb3NzU3VtIiwiZGVsZXRlQnRuIiwiYXBwZW5kIiwidXBkYXRlU2VydmljZXNUYWJsZSIsInVwZGF0ZVNlcnZpY2VUciIsImFkZEV2ZW50TGlzdGVuZXIiLCJxdWFudGl0eSIsInNlcnZpY2VUciIsIm5ldFBlck9uZVBpZWNlIiwidGF4IiwibmV0IiwiZ3Jvc3MiLCJ0b3RhbEdyb3NzIiwiY2FsY3VsYXRlVGFibGVTdW1tYXJ5IiwiZGVsZXRlU2VydmljZUl0ZW0iLCJ0YXJnZXQiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInBhcmVudEVsZW1lbnQiLCJvdXRlckhUTUwiLCJrZXkiLCJsb2NhbE5hbWUiLCJ1cGRhdGVJdGVtc051bWJlcnMiLCJzaG93RW1wdHlJbmZvIiwiaXRlbXNOb1NwYW5zIiwicG9zaXRpb25IaWRkZW5JbnB1dHMiLCJsZXQiLCJpIiwidGV4dENvbnRlbnQiLCJzZXJ2aWNlcyIsInN0eWxlIiwiZGlzcGxheSIsInN1bVVwVmFsdWVzIiwiaW5wdXRzQXJyU2VsZWN0b3JBbGwiLCJvdXRwdXRTcGFuU2VsZWN0b3IiLCJpbnB1dHNBcnIiLCJvdXRwdXRTcGFuIiwic3VtIiwiZm9yRWFjaCIsImVsIiwidXBkYXRlQWxsSGlkZGVuSW5wdXRWYWx1ZXMiLCJ0b3RhbEdyb3NzTnVtIiwidG90YWxOZXQiLCJ0b3RhbE5ldE51bSIsInZlcmJhbE5vdGF0aW9uIl0sIm1hcHBpbmdzIjoiQUFTQSxNQUFNQSx5QkFBMkIsQ0FBQ0MsRUFBYUMsS0FDaENDLFNBQVNDLGNBQWNGLENBQWEsRUFDNUNHLE1BQVFKLENBQ2YsRUFTTUssbUJBQXFCLElBRUwsVUFBakIsT0FBT0QsSUFDVkEsRUFBUUEsRUFBTUUsUUFBUSxJQUFLLEdBQUcsRUFDOUJGLEVBQVFHLFdBQVdILENBQUssR0FJckJBLEVBQVEsR0FBTSxJQUNqQkEsRUFBUUEsRUFBTUksUUFBUSxDQUFDLEVBQ3ZCSixFQUFRRyxXQUFXSCxDQUFLLEdBR2xCQSxHQVFGSyxtQkFBcUIsQ0FBQ0MsRUFBS0MsS0FDaENELEVBQU1BLEVBQUlGLFFBQVEsQ0FBQyxFQUVuQkUsR0FEQUEsR0FBTyxJQUFNQyxHQUNITCxRQUFRLElBQUssR0FBRyxHQVFyQk0saUJBQW1CVixTQUFTQyxjQUFjLGtCQUFrQixFQUk1RFUsaUJBQW1CLElBQ3hCQyxFQUFFQyxlQUFlLEVBRWpCLElBQU1DLEVBQWdCZCxTQUFTQyxjQUFjLHVCQUF1QixFQUM5RGMsRUFBaUJELEVBQWNFLGlCQUFpQixJQUFJLEVBQUVDLE9BRXREQyxFQUFVbEIsU0FBU21CLGNBQWMsSUFBSSxFQUNyQ0MsRUFBYXBCLFNBQVNtQixjQUFjLElB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
