const changeValueInHiddenInput=(e,t)=>{document.querySelector(t).value=e},parseAmountToCount=e=>("string"==typeof e&&(e=e.replace(",","."),e=parseFloat(e)),e%1==0&&(e=e.toFixed(2),e=parseFloat(e)),e),convertNumtoAmount=(e,t)=>(e=e.toFixed(2),e=(e+=" "+t).replace(".",",")),addNewServiceBtn=document.querySelector(".new-service-btn"),createNewService=e=>{e.preventDefault();var e=document.querySelector("#services-table tbody"),t=e.querySelectorAll("tr").length,n=document.createElement("tr"),a=document.createElement("td"),r=(a.innerHTML=`<span class="service-title--mobile">No.: </span><span class="service-item-number"></span>
<input hidden class="position-hidden-input" type="text" name="position[${t}]" value=""></input>`,document.createElement("td")),s=(r.innerHTML=`<span class="service-title--mobile">Item / service: </span>
<input class="service-item-name"  type="text" name="service_name[${t}]">`,document.createElement("td")),l=(s.innerHTML=`<span class="service-title--mobile">Service code: </span>
<input class="service-item-code" type="text" name="service_code[${t}]">`,document.createElement("td")),i=(l.innerHTML=`<span class="service-title--mobile">Quantity: </span>
<input type="number" value="1" min="0" class="service-item-amount" name="quantity[${t}]">`,document.createElement("td")),c=(i.innerHTML=`<span class="service-title--mobile">Net price (PLN): </span>
<input type="number" min="0" value="0.00" class="service-item-net-value" name="item_net_price[${t}]" step=".01">`,document.createElement("td")),o=(c.innerHTML=`<span class="service-title--mobile">Tax: </span>
<select class="service-item-tax" name="service_tax[${t}]">
	<option value="0">tax-free</option>
	<option value="0.08">8%</option>
	<option value="0.23">23%</option>
</select>`,document.createElement("td")),u=(o.innerHTML=`<span class="service-title--mobile">Net sum (PLN): </span>
<input type="text" value="0.00 PLN" class="service-item-net-sum" name="service_total_net[${t}]" readonly>`,document.createElement("td")),t=(u.innerHTML=`<span class="service-title--mobile">Gross sum (PLN): </span>
<input type="text" value="0.00 PLN" class="service-item-gross-sum" name="service_total_gross[${t}]" readonly>`,document.createElement("td"));t.innerHTML=`<button class="delete-btn">
<i class="fa-solid fa-trash"></i>Delete</button>`,n.append(a,r,s,l,i,c,o,u,t),e.append(n),updateServicesTable()},updateServiceTr=(addNewServiceBtn.addEventListener("click",e=>createNewService(e)),e=>{var t=e.querySelector(".service-item-amount").value,n=e.querySelector(".service-item-net-value").value,a=e.querySelector(".service-item-tax").value,r=e.querySelector(".service-item-net-sum"),e=e.querySelector(".service-item-gross-sum"),t=(r.value=convertNumtoAmount(t*n,"PLN"),parseAmountToCount(a)*parseAmountToCount(r.value)+parseAmountToCount(r.value));e.value=convertNumtoAmount(t,"PLN"),calculateTableSummary()}),deleteServiceItem=(document.addEventListener("input",e=>{(e.target.classList.contains("service-item-amount")||e.target.classList.contains("service-item-net-value")||e.target.classList.contains("service-item-tax"))&&updateServiceTr(e.target.parentElement.parentElement)}),e=>{e.outerHTML="",updateServicesTable()}),updateServicesTable=(document.addEventListener("click",e=>{e.target.classList.contains("delete-btn")&&deleteServiceItem(e.target.parentElement.parentElement)}),document.addEventListener("keydown",e=>{"Enter"===e.key&&"textarea"!==e.target.localName&&e.preventDefault()}),()=>{updateItemsNumbers(),showEmptyInfo(),calculateTableSummary()}),updateItemsNumbers=()=>{var t=document.querySelectorAll(".invoice-edit__form-box-services-table .service-item-number"),n=document.querySelectorAll(".position-hidden-input");for(let e=0;e<t.length;e++)t[e].textContent=e+1;for(let e=0;e<n.length;e++)n[e].value=e+1},showEmptyInfo=()=>{var e=document.querySelectorAll("#services-table tbody tr");document.querySelector("#services-table tbody .empty-info").style.display=1===e.length?"grid":"none"},calculateTableSummary=()=>{sumUpValues(".service-item-net-sum",".invoice-total-net"),sumUpValues(".service-item-gross-sum",".invoice-total-gross")},sumUpValues=(e,t)=>{e=document.querySelectorAll(e),t=document.querySelector(t);let n=0;e.forEach(e=>{n+=parseFloat(e.value.replace(",","."))}),t.textContent=(n.toFixed(2)+" PLN").replace(".",","),updateAllHiddenInputValues()},updateAllHiddenInputValues=()=>{var e=document.querySelector(".invoice-total-gross"),e=parseAmountToCount(e.textContent),t=document.querySelector(".invoice-total-net"),t=parseAmountToCount(t.textContent);changeValueInHiddenInput(e,"#total-gross"),changeValueInHiddenInput(e,"#to-pay-numeric"),changeValueInHiddenInput(verbalNotation(e),"#to-pay-verbal"),changeValueInHiddenInput(t,"#total-net")};document.addEventListener("DOMContentLoaded",updateServicesTable);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW52b2ljZS9lZGl0X2Zvcm1fc2VydmljZXMubWluLmpzIiwic291cmNlcyI6WyJpbnZvaWNlL2VkaXRfZm9ybV9zZXJ2aWNlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gR0xPQkFMIEZVTkNUSU9OU1xyXG5cclxuLyogXHJcbmNoYW5nZVZhbHVlSW5IaWRkZW5JbnB1dCh2YWx1ZVN0cmluZywgaW5wdXRJZFN0cmluZylcclxuVGhpcyBmdW5jdGlvbiBjb21wbGV0ZXMgdGhlIHZhbHVlIGluIHRoZSBpbmRpY2F0ZWQgaW5wdXRlLlxyXG5JbiB0aGlzIGFwcGxpY2F0aW9uLCB0aGUgdmFsdWUgZnJvbSB0aGUgaGlkZGVuIGlucHV0cyB3aWxsIGxhdGVyIFxyXG5iZSBwYXNzZWQgdmlhIFBPU1QgbWV0aG9kIHRvIHRoZSBQSFAgc2NyaXB0LlxyXG4qL1xyXG5jb25zdCBjaGFuZ2VWYWx1ZUluSGlkZGVuSW5wdXQgPSAodmFsdWVTdHJpbmcsIGlucHV0SWRTdHJpbmcpID0+IHtcclxuXHRjb25zdCBpbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoaW5wdXRJZFN0cmluZyk7XHJcblx0aW5wdXQudmFsdWUgPSB2YWx1ZVN0cmluZztcclxufTtcclxuXHJcbi8qIFxyXG5wYXJzZUFtb3VudFRvQ291bnQodmFsdWUpXHJcblRoaXMgZnVuY3Rpb24gdGFrZXMgYW4gYW1vdW50IChzcmluZykgYW5kIGNvbnZlcnRzIGl0IHRvIGEgbnVtYmVyLlxyXG5FLmcuLiBcclxuJzEyLjk5IFBMTicgPj4+IDEyLjk5XHJcbicxNSBQTE4nID4+PiAxNVxyXG4qL1xyXG5jb25zdCBwYXJzZUFtb3VudFRvQ291bnQgPSAodmFsdWUpID0+IHtcclxuXHQvLyBpZiBzdHJpbmcgY29udmVydCB0byBudW1iZXJcclxuXHRpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xyXG5cdFx0dmFsdWUgPSB2YWx1ZS5yZXBsYWNlKCcsJywgJy4nKTtcclxuXHRcdHZhbHVlID0gcGFyc2VGbG9hdCh2YWx1ZSk7XHJcblx0fVxyXG5cclxuXHQvLyByb3VuZCB0byB0d28gZGVjaW1hbCBwbGFjZXNcclxuXHRpZiAodmFsdWUgJSAxID09PSAwKSB7XHJcblx0XHR2YWx1ZSA9IHZhbHVlLnRvRml4ZWQoMik7IC8vIGNoYW5nZXMgdG8gc3RyaW5nXHJcblx0XHR2YWx1ZSA9IHBhcnNlRmxvYXQodmFsdWUpO1xyXG5cdH1cclxuXHJcblx0cmV0dXJuIHZhbHVlO1xyXG59O1xyXG5cclxuLypcclxuY29udmVydE51bXRvQW1vdW50KG51bWJlciwgc3RyaW5nKVxyXG5UaGlzIGZ1bmN0aW9uIHRha2VzIGEgbnVtYmVyLCByb3VuZHMgaXQgdG8gdHdvIGRlY2ltYWwgcGxhY2VzLCBcclxuYWRkcyBhIGN1cnJlbmN5IG5vdGF0aW9uIGFuZCBjb252ZXJ0cyB0aGUgcGVyaW9kIHRvIGEgY29tbWFcclxuKi9cclxuY29uc3QgY29udmVydE51bXRvQW1vdW50ID0gKG51bSwgY3VycmVuY3lTdHJpbmcpID0+IHtcclxuXHRudW0gPSBudW0udG9GaXhlZCgyKTtcclxuXHRudW0gKz0gJyAnICsgY3VycmVuY3lTdHJpbmc7XHJcblx0bnVtID0gbnVtLnJlcGxhY2UoJy4nLCAnLCcpO1xyXG5cclxuXHRyZXR1cm4gbnVtO1xyXG59O1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIEFERCBORVcgU0VSVklDRSBUUiBJTiBUQUJMRVxyXG5jb25zdCBhZGROZXdTZXJ2aWNlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5ldy1zZXJ2aWNlLWJ0bicpO1xyXG5cclxuY29uc3QgY3JlYXRlTmV3U2VydmljZSA9IChlKSA9PiB7XHJcblx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuXHRjb25zdCBzZXJ2aWNlc1Rib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NlcnZpY2VzLXRhYmxlIHRib2R5Jyk7XHJcblx0Y29uc3Qgc2VydmljZXNMZW5ndGggPSBzZXJ2aWNlc1Rib2R5LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RyJykubGVuZ3RoO1xyXG5cclxuXHRjb25zdCBuZXdJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTtcclxuXHRjb25zdCBpdGVtTm9TcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcclxuXHRpdGVtTm9TcGFuLmlubmVySFRNTCA9IGA8c3BhbiBjbGFzcz1cInNlcnZpY2UtdGl0bGUtLW1vYmlsZVwiPk5vLjogPC9zcGFuPjxzcGFuIGNsYXNzPVwic2VydmljZS1pdGVtLW51bWJlclwiPjwvc3Bhbj5cclxuPGlucHV0IGhpZGRlbiBjbGFzcz1cInBvc2l0aW9uLWhpZGRlbi1pbnB1dFwiIHR5cGU9XCJ0ZXh0XCIgbmFtZT1cInBvc2l0aW9uWyR7c2VydmljZXNMZW5ndGh9XVwiIHZhbHVlPVwiXCI+PC9pbnB1dD5gO1xyXG5cclxuXHRjb25zdCBzZXJ2aWNlTmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XHJcblx0c2VydmljZU5hbWUuaW5uZXJIVE1MID0gYDxzcGFuIGNsYXNzPVwic2VydmljZS10aXRsZS0tbW9iaWxlXCI+SXRlbSAvIHNlcnZpY2U6IDwvc3Bhbj5cclxuPGlucHV0IGNsYXNzPVwic2VydmljZS1pdGVtLW5hbWVcIiAgdHlwZT1cInRleHRcIiBuYW1lPVwic2VydmljZV9uYW1lWyR7c2VydmljZXNMZW5ndGh9XVwiPmA7XHJcblxyXG5cdGNvbnN0IGFjdGl2aXR5Q29kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XHJcblx0YWN0aXZpdHlDb2RlLmlubmVySFRNTCA9IGA8c3BhbiBjbGFzcz1cInNlcnZpY2UtdGl0bGUtLW1vYmlsZVwiPlNlcnZpY2UgY29kZTogPC9zcGFuPlxyXG48aW5wdXQgY2xhc3M9XCJzZXJ2aWNlLWl0ZW0tY29kZVwiIHR5cGU9XCJ0ZXh0XCIgbmFtZT1cInNlcnZpY2VfY29kZVske3NlcnZpY2VzTGVuZ3RofV1cIj5gO1xyXG5cclxuXHRjb25zdCBhbW91bnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xyXG5cdGFtb3VudC5pbm5lckhUTUwgPSBgPHNwYW4gY2xhc3M9XCJzZXJ2aWNlLXRpdGxlLS1tb2JpbGVcIj5RdWFudGl0eTogPC9zcGFuPlxyXG48aW5wdXQgdHlwZT1cIm51bWJlclwiIHZhbHVlPVwiMVwiIG1pbj1cIjBcIiBjbGFzcz1cInNlcnZpY2UtaXRlbS1hbW91bnRcIiBuYW1lPVwicXVhbnRpdHlbJHtzZXJ2aWNlc0xlbmd0aH1dXCI+YDtcclxuXHJcblx0Y29uc3QgbmV0VmFsdWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xyXG5cdG5ldFZhbHVlLmlubmVySFRNTCA9IGA8c3BhbiBjbGFzcz1cInNlcnZpY2UtdGl0bGUtLW1vYmlsZVwiPk5ldCBwcmljZSAoUExOKTogPC9zcGFuPlxyXG48aW5wdXQgdHlwZT1cIm51bWJlclwiIG1pbj1cIjBcIiB2YWx1ZT1cIjAuMDBcIiBjbGFzcz1cInNlcnZpY2UtaXRlbS1uZXQtdmFsdWVcIiBuYW1lPVwiaXRlbV9uZXRfcHJpY2VbJHtzZXJ2aWNlc0xlbmd0aH1dXCIgc3RlcD1cIi4wMVwiPmA7XHJcblxyXG5cdGNvbnN0IHRheFZhbHVlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcclxuXHR0YXhWYWx1ZS5pbm5lckhUTUwgPSBgPHNwYW4gY2xhc3M9XCJzZXJ2aWNlLXRpdGxlLS1tb2JpbGVcIj5UYXg6IDwvc3Bhbj5cclxuPHNlbGVjdCBjbGFzcz1cInNlcnZpY2UtaXRlbS10YXhcIiBuYW1lPVwic2VydmljZV90YXhbJHtzZXJ2aWNlc0xlbmd0aH1dXCI+XHJcblx0PG9wdGlvbiB2YWx1ZT1cIjBcIj50YXgtZnJlZTwvb3B0aW9uPlxyXG5cdDxvcHRpb24gdmFsdWU9XCIwLjA4XCI+OCU8L29wdGlvbj5cclxuXHQ8b3B0aW9uIHZhbHVlPVwiMC4yM1wiPjIzJTwvb3B0aW9uPlxyXG48L3NlbGVjdD5gO1xyXG5cclxuXHRjb25zdCBuZXRTdW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xyXG5cdG5ldFN1bS5pbm5lckhUTUwgPSBgPHNwYW4gY2xhc3M9XCJzZXJ2aWNlLXRpdGxlLS1tb2JpbGVcIj5OZXQgc3VtIChQTE4pOiA8L3NwYW4+XHJcbjxpbnB1dCB0eXBlPVwidGV4dFwiIHZhbHVlPVwiMC4wMCBQTE5cIiBjbGFzcz1cInNlcnZpY2UtaXRlbS1uZXQtc3VtXCIgbmFtZT1cInNlcnZpY2VfdG90YWxfbmV0WyR7c2VydmljZXNMZW5ndGh9XVwiIHJlYWRvbmx5PmA7XHJcblxyXG5cdGNvbnN0IGdyb3NzU3VtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcclxuXHRncm9zc1N1bS5pbm5lckhUTUwgPSBgPHNwYW4gY2xhc3M9XCJzZXJ2aWNlLXRpdGxlLS1tb2JpbGVcIj5Hcm9zcyBzdW0gKFBMTik6IDwvc3Bhbj5cclxuPGlucHV0IHR5cGU9XCJ0ZXh0XCIgdmFsdWU9XCIwLjAwIFBMTlwiIGNsYXNzPVwic2VydmljZS1pdGVtLWdyb3NzLXN1bVwiIG5hbWU9XCJzZXJ2aWNlX3RvdGFsX2dyb3NzWyR7c2VydmljZXNMZW5ndGh9XVwiIHJlYWRvbmx5PmA7XHJcblxyXG5cdGNvbnN0IGRlbGV0ZUJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XHJcblx0ZGVsZXRlQnRuLmlubmVySFRNTCA9IGA8YnV0dG9uIGNsYXNzPVwiZGVsZXRlLWJ0blwiPlxyXG48aSBjbGFzcz1cImZhLXNvbGlkIGZhLXRyYXNoXCI+PC9pPkRlbGV0ZTwvYnV0dG9uPmA7XHJcblxyXG5cdG5ld0l0ZW0uYXBwZW5kKFxyXG5cdFx0aXRlbU5vU3BhbixcclxuXHRcdHNlcnZpY2VOYW1lLFxyXG5cdFx0YWN0aXZpdHlDb2RlLFxyXG5cdFx0YW1vdW50LFxyXG5cdFx0bmV0VmFsdWUsXHJcblx0XHR0YXhWYWx1ZSxcclxuXHRcdG5ldFN1bSxcclxuXHRcdGdyb3NzU3VtLFxyXG5cdFx0ZGVsZXRlQnRuXHJcblx0KTtcclxuXHRzZXJ2aWNlc1Rib2R5LmFwcGVuZChuZXdJdGVtKTtcclxuXHJcblx0dXBkYXRlU2VydmljZXNUYWJsZSgpO1xyXG59O1xyXG5cclxuYWRkTmV3U2VydmljZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBjcmVhdGVOZXdTZXJ2aWNlKGUpKTtcclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBVUERBVEUgVkFMVUVTIElOIFNFUlZJQ0UgVFIgQUZURVIgQ0hBTkdFUyBJTiBJTlBVVFxyXG5jb25zdCB1cGRhdGVTZXJ2aWNlVHIgPSAoc2VydmljZVRyKSA9PiB7XHJcblx0Y29uc3QgcXVhbnRpdHkgPSBzZXJ2aWNlVHIucXVlcnlTZWxlY3RvcignLnNlcnZpY2UtaXRlbS1hbW91bnQnKS52YWx1ZTtcclxuXHRjb25zdCBuZXRQZXJPbmVQaWVjZSA9IHNlcnZpY2VUci5xdWVyeVNlbGVjdG9yKFxyXG5cdFx0Jy5zZXJ2aWNlLWl0ZW0tbmV0LXZhbHVlJ1xyXG5cdCkudmFsdWU7XHJcblx0Y29uc3QgdGF4ID0gc2VydmljZVRyLnF1ZXJ5U2VsZWN0b3IoJy5zZXJ2aWNlLWl0ZW0tdGF4JykudmFsdWU7XHJcblx0Y29uc3QgbmV0ID0gc2VydmljZVRyLnF1ZXJ5U2VsZWN0b3IoJy5zZXJ2aWNlLWl0ZW0tbmV0LXN1bScpO1xyXG5cdGNvbnN0IGdyb3NzID0gc2VydmljZVRyLnF1ZXJ5U2VsZWN0b3IoJy5zZXJ2aWNlLWl0ZW0tZ3Jvc3Mtc3VtJyk7XHJcblxyXG5cdC8vIENhbGN1bGF0ZSB0b3RhbCBuZXQgZm9yIG9uZSBzZXJ2aWNlVHJcclxuXHRuZXQudmFsdWUgPSBjb252ZXJ0TnVtdG9BbW91bnQocXVhbnRpdHkgKiBuZXRQZXJPbmVQaWVjZSwgJ1BMTicpO1xyXG5cclxuXHQvLyBDYWxjdWxhdGUgdG90YWwgZ3Jvc3MgZm9yIG9uZSBzZXJ2aWNlVHJcclxuXHRjb25zdCB0b3RhbEdyb3NzID1cclxuXHRcdHBhcnNlQW1vdW50VG9Db3VudCh0YXgpICogcGFyc2VBbW91bnRUb0NvdW50KG5ldC52YWx1ZSkgK1xyXG5cdFx0cGFyc2VBbW91bnRUb0NvdW50KG5ldC52YWx1ZSk7XHJcblxyXG5cdGdyb3NzLnZhbHVlID0gY29udmVydE51bXRvQW1vdW50KHRvdGFsR3Jvc3MsICdQTE4nKTtcclxuXHJcblx0Ly8gU3VtIHVwIHRoZSB0YWJsZVxyXG5cdGNhbGN1bGF0ZVRhYmxlU3VtbWFyeSgpO1xyXG59O1xyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoZSkgPT4ge1xyXG5cdGlmIChcclxuXHRcdGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnc2VydmljZS1pdGVtLWFtb3VudCcpIHx8XHJcblx0XHRlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3NlcnZpY2UtaXRlbS1uZXQtdmFsdWUnKSB8fFxyXG5cdFx0ZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdzZXJ2aWNlLWl0ZW0tdGF4JylcclxuXHQpIHtcclxuXHRcdHVwZGF0ZVNlcnZpY2VUcihlLnRhcmdldC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQpO1xyXG5cdH1cclxufSk7XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gREVMRVRFIFNFUlZJQ0UgVFIgRlJPTSBUQUJMRVxyXG5jb25zdCBkZWxldGVTZXJ2aWNlSXRlbSA9IChzZXJ2aWNlVHIpID0+IHtcclxuXHRzZXJ2aWNlVHIub3V0ZXJIVE1MID0gJyc7XHJcblx0dXBkYXRlU2VydmljZXNUYWJsZSgpO1xyXG59O1xyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG5cdGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2RlbGV0ZS1idG4nKSkge1xyXG5cdFx0ZGVsZXRlU2VydmljZUl0ZW0oZS50YXJnZXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50KTtcclxuXHR9XHJcbn0pO1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIEJMT0NLIFRIRSBGT1JNIEJFSU5HIFNFTlQgQVVUT01BVElDQUxMWSBBRlRFUiBQUkVTUyBFTlRFUiBJTiBURVhUQVJFQVxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHtcclxuXHRpZiAoZS5rZXkgPT09ICdFbnRlcicgJiYgZS50YXJnZXQubG9jYWxOYW1lICE9PSAndGV4dGFyZWEnKSB7XHJcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0fVxyXG59KTtcclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBVUERBVEUgREFUQSBJTiBTRVJWSUNFIFRBQkxFXHJcbmNvbnN0IHVwZGF0ZVNlcnZpY2VzVGFibGUgPSAoKSA9PiB7XHJcblx0dXBkYXRlSXRlbXNOdW1iZXJzKCk7XHJcblx0c2hvd0VtcHR5SW5mbygpO1xyXG5cdGNhbGN1bGF0ZVRhYmxlU3VtbWFyeSgpO1xyXG59O1xyXG5cclxuY29uc3QgdXBkYXRlSXRlbXNOdW1iZXJzID0gKCkgPT4ge1xyXG5cdGNvbnN0IGl0ZW1zTm9TcGFucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXHJcblx0XHQnLmludm9pY2UtZWRpdF9fZm9ybS1ib3gtc2VydmljZXMtdGFibGUgLnNlcnZpY2UtaXRlbS1udW1iZXInXHJcblx0KTtcclxuXHJcblx0Y29uc3QgcG9zaXRpb25IaWRkZW5JbnB1dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFxyXG5cdFx0Jy5wb3NpdGlvbi1oaWRkZW4taW5wdXQnXHJcblx0KTtcclxuXHJcblx0Zm9yIChsZXQgaSA9IDA7IGkgPCBpdGVtc05vU3BhbnMubGVuZ3RoOyBpKyspIHtcclxuXHRcdGl0ZW1zTm9TcGFuc1tpXS50ZXh0Q29udGVudCA9IGkgKyAxO1xyXG5cdH1cclxuXHJcblx0Zm9yIChsZXQgaSA9IDA7IGkgPCBwb3NpdGlvbkhpZGRlbklucHV0cy5sZW5ndGg7IGkrKykge1xyXG5cdFx0cG9zaXRpb25IaWRkZW5JbnB1dHNbaV0udmFsdWUgPSBpICsgMTtcclxuXHR9XHJcbn07XHJcblxyXG5jb25zdCBzaG93RW1wdHlJbmZvID0gKCkgPT4ge1xyXG5cdGNvbnN0IHNlcnZpY2VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI3NlcnZpY2VzLXRhYmxlIHRib2R5IHRyJyk7XHJcblx0Y29uc3QgZW1wdHlJbmZvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NlcnZpY2VzLXRhYmxlIHRib2R5IC5lbXB0eS1pbmZvJyk7XHJcblx0ZW1wdHlJbmZvLnN0eWxlLmRpc3BsYXkgPSBzZXJ2aWNlcy5sZW5ndGggPT09IDEgPyAnZ3JpZCcgOiAnbm9uZSc7XHJcbn07XHJcblxyXG5jb25zdCBjYWxjdWxhdGVUYWJsZVN1bW1hcnkgPSAoKSA9PiB7XHJcblx0c3VtVXBWYWx1ZXMoJy5zZXJ2aWNlLWl0ZW0tbmV0LXN1bScsICcuaW52b2ljZS10b3RhbC1uZXQnKTtcclxuXHRzdW1VcFZhbHVlcygnLnNlcnZpY2UtaXRlbS1ncm9zcy1zdW0nLCAnLmludm9pY2UtdG90YWwtZ3Jvc3MnKTtcclxufTtcclxuXHJcbmNvbnN0IHN1bVVwVmFsdWVzID0gKGlucHV0c0FyclNlbGVjdG9yQWxsLCBvdXRwdXRTcGFuU2VsZWN0b3IpID0+IHtcclxuXHRjb25zdCBpbnB1dHNBcnIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGlucHV0c0FyclNlbGVjdG9yQWxsKTtcclxuXHRjb25zdCBvdXRwdXRTcGFuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihvdXRwdXRTcGFuU2VsZWN0b3IpO1xyXG5cclxuXHRsZXQgc3VtID0gMDtcclxuXHRpbnB1dHNBcnIuZm9yRWFjaCgoZWwpID0+IHtcclxuXHRcdHN1bSArPSBwYXJzZUZsb2F0KGVsLnZhbHVlLnJlcGxhY2UoJywnLCAnLicpKTtcclxuXHR9KTtcclxuXHJcblx0b3V0cHV0U3Bhbi50ZXh0Q29udGVudCA9IGAke3N1bS50b0ZpeGVkKDIpfSBQTE5gLnJlcGxhY2UoJy4nLCAnLCcpO1xyXG5cdHVwZGF0ZUFsbEhpZGRlbklucHV0VmFsdWVzKCk7XHJcbn07XHJcblxyXG5jb25zdCB1cGRhdGVBbGxIaWRkZW5JbnB1dFZhbHVlcyA9ICgpID0+IHtcclxuXHRjb25zdCB0b3RhbEdyb3NzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmludm9pY2UtdG90YWwtZ3Jvc3MnKTtcclxuXHRjb25zdCB0b3RhbEdyb3NzTnVtID0gcGFyc2VBbW91bnRUb0NvdW50KHRvdGFsR3Jvc3MudGV4dENvbnRlbnQpO1xyXG5cclxuXHRjb25zdCB0b3RhbE5ldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbnZvaWNlLXRvdGFsLW5ldCcpO1xyXG5cdGNvbnN0IHRvdGFsTmV0TnVtID0gcGFyc2VBbW91bnRUb0NvdW50KHRvdGFsTmV0LnRleHRDb250ZW50KTtcclxuXHJcblx0Y2hhbmdlVmFsdWVJbkhpZGRlbklucHV0KHRvdGFsR3Jvc3NOdW0sICcjdG90YWwtZ3Jvc3MnKTtcclxuXHRjaGFuZ2VWYWx1ZUluSGlkZGVuSW5wdXQodG90YWxHcm9zc051bSwgJyN0by1wYXktbnVtZXJpYycpO1xyXG5cdGNoYW5nZVZhbHVlSW5IaWRkZW5JbnB1dCh2ZXJiYWxOb3RhdGlvbih0b3RhbEdyb3NzTnVtKSwgJyN0by1wYXktdmVyYmFsJyk7XHJcblx0Y2hhbmdlVmFsdWVJbkhpZGRlbklucHV0KHRvdGFsTmV0TnVtLCAnI3RvdGFsLW5ldCcpO1xyXG59O1xyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIHVwZGF0ZVNlcnZpY2VzVGFibGUpOyJdLCJuYW1lcyI6WyJjaGFuZ2VWYWx1ZUluSGlkZGVuSW5wdXQiLCJ2YWx1ZVN0cmluZyIsImlucHV0SWRTdHJpbmciLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ2YWx1ZSIsInBhcnNlQW1vdW50VG9Db3VudCIsInJlcGxhY2UiLCJwYXJzZUZsb2F0IiwidG9GaXhlZCIsImNvbnZlcnROdW10b0Ftb3VudCIsIm51bSIsImN1cnJlbmN5U3RyaW5nIiwiYWRkTmV3U2VydmljZUJ0biIsImNyZWF0ZU5ld1NlcnZpY2UiLCJlIiwicHJldmVudERlZmF1bHQiLCJzZXJ2aWNlc1Rib2R5Iiwic2VydmljZXNMZW5ndGgiLCJxdWVyeVNlbGVjdG9yQWxsIiwibGVuZ3RoIiwibmV3SXRlbSIsImNyZWF0ZUVsZW1lbnQiLCJpdGVtTm9TcGFuIiwic2VydmljZU5hbWUiLCJpbm5lckhUTUwiLCJhY3Rpdml0eUNvZGUiLCJhbW91bnQiLCJuZXRWYWx1ZSIsInRheFZhbHVlIiwibmV0U3VtIiwiZ3Jvc3NTdW0iLCJkZWxldGVCdG4iLCJhcHBlbmQiLCJ1cGRhdGVTZXJ2aWNlc1RhYmxlIiwidXBkYXRlU2VydmljZVRyIiwiYWRkRXZlbnRMaXN0ZW5lciIsInF1YW50aXR5Iiwic2VydmljZVRyIiwibmV0UGVyT25lUGllY2UiLCJ0YXgiLCJuZXQiLCJncm9zcyIsInRvdGFsR3Jvc3MiLCJjYWxjdWxhdGVUYWJsZVN1bW1hcnkiLCJkZWxldGVTZXJ2aWNlSXRlbSIsInRhcmdldCIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwicGFyZW50RWxlbWVudCIsIm91dGVySFRNTCIsImtleSIsImxvY2FsTmFtZSIsInVwZGF0ZUl0ZW1zTnVtYmVycyIsInNob3dFbXB0eUluZm8iLCJpdGVtc05vU3BhbnMiLCJwb3NpdGlvbkhpZGRlbklucHV0cyIsImxldCIsImkiLCJ0ZXh0Q29udGVudCIsInNlcnZpY2VzIiwic3R5bGUiLCJkaXNwbGF5Iiwic3VtVXBWYWx1ZXMiLCJpbnB1dHNBcnJTZWxlY3RvckFsbCIsIm91dHB1dFNwYW5TZWxlY3RvciIsImlucHV0c0FyciIsIm91dHB1dFNwYW4iLCJzdW0iLCJmb3JFYWNoIiwiZWwiLCJ1cGRhdGVBbGxIaWRkZW5JbnB1dFZhbHVlcyIsInRvdGFsR3Jvc3NOdW0iLCJ0b3RhbE5ldCIsInRvdGFsTmV0TnVtIiwidmVyYmFsTm90YXRpb24iXSwibWFwcGluZ3MiOiJBQVNBLE1BQU1BLHlCQUEyQixDQUFDQyxFQUFhQyxLQUNoQ0MsU0FBU0MsY0FBY0YsQ0FBYSxFQUM1Q0csTUFBUUosQ0FDZixFQVNNSyxtQkFBcUIsSUFFTCxVQUFqQixPQUFPRCxJQUNWQSxFQUFRQSxFQUFNRSxRQUFRLElBQUssR0FBRyxFQUM5QkYsRUFBUUcsV0FBV0gsQ0FBSyxHQUlyQkEsRUFBUSxHQUFNLElBQ2pCQSxFQUFRQSxFQUFNSSxRQUFRLENBQUMsRUFDdkJKLEVBQVFHLFdBQVdILENBQUssR0FHbEJBLEdBUUZLLG1CQUFxQixDQUFDQyxFQUFLQyxLQUNoQ0QsRUFBTUEsRUFBSUYsUUFBUSxDQUFDLEVBRW5CRSxHQURBQSxHQUFPLElBQU1DLEdBQ0hMLFFBQVEsSUFBSyxHQUFHLEdBT3JCTSxpQkFBbUJWLFNBQVNDLGNBQWMsa0JBQWtCLEVBRTVEVSxpQkFBbUIsSUFDeEJDLEVBQUVDLGVBQWUsRUFFakIsSUFBTUMsRUFBZ0JkLFNBQVNDLGNBQWMsdUJBQXVCLEVBQzlEYyxFQUFpQkQsRUFBY0UsaUJBQWlCLElBQUksRUFBRUMsT0FFdERDLEVBQVVsQixTQUFTbUIsY0FBYyxJQUFJLEVBQ3JDQyxFQUFhcEIsU0FBU21CLGNBQWMsSUFBSSxFQUl4Q0UsR0FITkQsRUFBV0U7eUVBQzZEUCx3QkFFcERmLFNBQVNtQixjQUFjLElBQUksR0FJekNJLEdBSE5GLEVBQVlDO21FQUNzRFAsT0FFN0NmLFNBQVNtQixjQUFjLElBQUks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
