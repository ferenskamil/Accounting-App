"use strict";var changeValueInHiddenInput=function(e,t){document.querySelector(t).value=e},parseAmountToCount=function(e){return"string"==typeof e&&(e=e.replace(",","."),e=parseFloat(e)),e%1==0&&(e=e.toFixed(2),e=parseFloat(e)),e},convertNumtoAmount=function(e,t){return e=e.toFixed(2),e=(e+=" "+t).replace(".",",")},updateServicesTable=function(){updateItemsNumbers(),showEmptyInfo(),calculateTableSummary()},updateItemsNumbers=function(){for(var e=document.querySelectorAll(".invoice-edit__form-box-services-table .service-item-number"),t=document.querySelectorAll(".position-hidden-input"),n=0;n<e.length;n++)e[n].textContent=n+1;for(var a=0;a<t.length;a++)t[a].value=a+1},showEmptyInfo=function(){var e=document.querySelectorAll("#services-table tbody tr");document.querySelector("#services-table tbody .empty-info").style.display=1===e.length?"grid":"none"},calculateTableSummary=function(){sumUpValues(".service-item-net-sum",".invoice-total-net"),sumUpValues(".service-item-gross-sum",".invoice-total-gross")},sumUpValues=function(e,t){var e=document.querySelectorAll(e),t=document.querySelector(t),n=0;e.forEach(function(e){n+=parseFloat(e.value.replace(",","."))}),t.textContent="".concat(n.toFixed(2)," $").replace(".",","),updateAllHiddenInputValues()},updateAllHiddenInputValues=function(){var e=document.querySelector(".invoice-total-gross"),e=parseAmountToCount(e.textContent),t=document.querySelector(".invoice-total-net"),t=parseAmountToCount(t.textContent);changeValueInHiddenInput(e,"#total-gross"),changeValueInHiddenInput(e,"#to-pay-numeric"),changeValueInHiddenInput(verbalNotation(e),"#to-pay-verbal"),changeValueInHiddenInput(t,"#total-net")},addNewServiceBtn=(document.addEventListener("DOMContentLoaded",updateServicesTable),document.querySelector(".new-service-btn")),createNewService=function(e){e.preventDefault();var e=document.querySelector("#services-table tbody"),t=e.querySelectorAll("tr").length,n=document.createElement("tr"),a=document.createElement("td"),c=(a.innerHTML='<span class="service-title--mobile">No.: </span><span class="service-item-number"></span>\n<input hidden class="position-hidden-input" type="text" name="position['.concat(t,']" value=""></input>'),document.createElement("td")),r=(c.innerHTML='<span class="service-title--mobile">Item / service: </span>\n<input class="service-item-name"  type="text" name="service_name['.concat(t,']">'),document.createElement("td")),o=(r.innerHTML='<span class="service-title--mobile">Service code: </span>\n<input class="service-item-code" type="text" name="service_code['.concat(t,']">'),document.createElement("td")),i=(o.innerHTML='<span class="service-title--mobile">Quantity: </span>\n<input type="number" value="1" min="0" class="service-item-amount" name="quantity['.concat(t,']">'),document.createElement("td")),s=(i.innerHTML='<span class="service-title--mobile">Net price ($): </span>\n<input type="number" min="0" value="0.00" class="service-item-net-value" name="item_net_price['.concat(t,']" step=".01">'),document.createElement("td")),u=(s.innerHTML='<span class="service-title--mobile">Tax: </span>\n<select class="service-item-tax" name="service_tax['.concat(t,']">\n\t<option value="0">tax-free</option>\n\t<option value="0.08">8%</option>\n\t<option value="0.23">23%</option>\n</select>'),document.createElement("td")),l=(u.innerHTML='<span class="service-title--mobile">Net sum ($): </span>\n<input type="text" value="0.00 $" class="service-item-net-sum" name="service_total_net['.concat(t,']" readonly>'),document.createElement("td")),t=(l.innerHTML='<span class="service-title--mobile">Gross sum ($): </span>\n<input type="text" value="0.00 $" class="service-item-gross-sum" name="service_total_gross['.concat(t,']" readonly>'),document.createElement("td"));t.innerHTML='<button class="delete-btn">\n<i class="fa-solid fa-trash"></i>Delete</button>',n.append(a,c,r,o,i,s,u,l,t),e.append(n),updateServicesTable()},updateServiceTr=(addNewServiceBtn.addEventListener("click",function(e){return createNewService(e)}),function(e){var t=e.querySelector(".service-item-amount").value,n=e.querySelector(".service-item-net-value").value,a=e.querySelector(".service-item-tax").value,c=e.querySelector(".service-item-net-sum"),e=e.querySelector(".service-item-gross-sum"),t=(c.value=convertNumtoAmount(t*n,"$"),parseAmountToCount(a)*parseAmountToCount(c.value)+parseAmountToCount(c.value));e.value=convertNumtoAmount(t,"$"),calculateTableSummary()}),deleteServiceItem=(document.addEventListener("input",function(e){(e.target.classList.contains("service-item-amount")||e.target.classList.contains("service-item-net-value")||e.target.classList.contains("service-item-tax"))&&updateServiceTr(e.target.parentElement.parentElement)}),function(e){e.outerHTML="",updateServicesTable()});document.addEventListener("click",function(e){e.target.classList.contains("delete-btn")&&deleteServiceItem(e.target.parentElement.parentElement)}),document.addEventListener("keydown",function(e){"Enter"===e.key&&"textarea"!==e.target.localName&&e.preventDefault()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhZ2VzL2FkZF9lZGl0X2Zvcm0vZWRpdF9mb3JtX3NlcnZpY2VzLmpzIl0sIm5hbWVzIjpbImNoYW5nZVZhbHVlSW5IaWRkZW5JbnB1dCIsInZhbHVlU3RyaW5nIiwiaW5wdXRJZFN0cmluZyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInBhcnNlQW1vdW50VG9Db3VudCIsInZhbHVlIiwicmVwbGFjZSIsInBhcnNlRmxvYXQiLCJ0b0ZpeGVkIiwiY29udmVydE51bXRvQW1vdW50IiwibnVtIiwiY3VycmVuY3lTdHJpbmciLCJ1cGRhdGVTZXJ2aWNlc1RhYmxlIiwidXBkYXRlSXRlbXNOdW1iZXJzIiwic2hvd0VtcHR5SW5mbyIsImNhbGN1bGF0ZVRhYmxlU3VtbWFyeSIsIml0ZW1zTm9TcGFucyIsInBvc2l0aW9uSGlkZGVuSW5wdXRzIiwiaSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJsZW5ndGgiLCJzdW1VcFZhbHVlcyIsImlucHV0c0FyciIsImlucHV0c0FyclNlbGVjdG9yQWxsIiwib3V0cHV0U3BhblNlbGVjdG9yIiwic3R5bGUiLCJkaXNwbGF5Iiwic2VydmljZXMiLCJ0ZXh0Q29udGVudCIsInN1bSIsInVwZGF0ZUFsbEhpZGRlbklucHV0VmFsdWVzIiwidG90YWxHcm9zcyIsInRvdGFsR3Jvc3NOdW0iLCJ0b3RhbE5ldCIsInZlcmJhbE5vdGF0aW9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNvbmNhdCIsImFkZE5ld1NlcnZpY2VCdG4iLCJjcmVhdGVOZXdTZXJ2aWNlIiwicHJldmVudERlZmF1bHQiLCJzZXJ2aWNlc0xlbmd0aCIsInNlcnZpY2VzVGJvZHkiLCJuZXdJdGVtIiwiY3JlYXRlRWxlbWVudCIsInRheFZhbHVlIiwiaW5uZXJIVE1MIiwibmV0U3VtIiwiZSIsImRlbGV0ZUJ0biIsImFwcGVuZCIsInNlcnZpY2VOYW1lIiwiaXRlbU5vU3BhbiIsInVwZGF0ZVNlcnZpY2VUciIsInNlcnZpY2VUciIsIm5ldCIsImFjdGl2aXR5Q29kZSIsImFtb3VudCIsImdyb3NzIiwibmV0UGVyT25lUGllY2UiLCJuZXRWYWx1ZSIsImdyb3NzU3VtIiwiZGVsZXRlU2VydmljZUl0ZW0iLCJxdWFudGl0eSIsInRheCIsInRhcmdldCIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwicGFyZW50RWxlbWVudCIsIm91dGVySFRNTCIsImtleSIsImxvY2FsTmFtZSJdLCJtYXBwaW5ncyI6ImFBT0EsSUFBQUEseUJBQUEsU0FBQUMsRUFBQUMsR0FDQUMsU0FBQUMsY0FBQUYsQ0FBQSxFQUNNRixNQUFBQSxDQUdOLEVBT0FLLG1CQUFBLFNBQUFDLEdBZUMsTUFidUIsVUFBbEJELE9BQUFBLElBQ0xDLEVBQUFBLEVBQUFDLFFBQUEsSUFBQSxHQUFBLEVBQ0FELEVBQUlFLFdBQVlGLENBQUssR0FNakJBLEVBQVEsR0FBTSxJQURsQkEsRUFBQUEsRUFBQUcsUUFBQSxDQUFBLEVBQ0FILEVBQUlBLFdBQWVBLENBQUUsR0FHckJBLENBR0QsRUFNQUksbUJBQUEsU0FBQUMsRUFBQUMsR0FNQyxPQUxERCxFQUFNRCxFQUFBQSxRQUFBQSxDQUFBQSxFQUdMQyxHQURBQSxHQURNQSxJQUFJRixHQUNIRixRQUFNSyxJQUFBQSxHQUFBQSxDQUlkLEVBSU1DLG9CQUFzQixXQUMzQkMsbUJBQWtCLEVBQ2xCQyxjQUFhLEVBQ2JDLHNCQUFxQixDQUN0QixFQUdPQyxtQkFBZWQsV0FpQnRCLElBakJDLElBSU1lLEVBQUFBLFNBQXVCZixpQkFJN0IsNkRBTkEsRUFVS2UsRUFBZUEsU0FBQUEsaUJBUG5CLHdCQUNELEVBV0tILEVBQUFBLEVBQWFJLEVBQUdGLEVBQWhCRixPQUFhQSxDQUFBLEdBQ2xCRSxFQUFjRSxHQUFHaEIsWUFBU2lCLEVBQUFBLEVBRzFCLElBQUEsSUFBQUQsRUFBQSxFQUFBQSxFQUFBRCxFQUFBRyxPQUFBRixDQUFBLEdBRURELEVBQU1GLEdBQXFCVixNQUFHYSxFQUF4QkgsQ0FSTixFQWFNTSxjQUFjLFdBVm5CLElBV01DLEVBQVlwQixTQUFTaUIsaUJBQWlC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QixFQUFFUixlQUFlLENBRW5CLENBQUMiLCJmaWxlIjoicGFnZXMvYWRkX2VkaXRfZm9ybS9lZGl0X2Zvcm1fc2VydmljZXMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIEdMT0JBTCBGVU5DVElPTlNcclxuXHJcbi8qIFxyXG5jaGFuZ2VWYWx1ZUluSGlkZGVuSW5wdXQodmFsdWVTdHJpbmcsIGlucHV0SWRTdHJpbmcpXHJcblRoaXMgZnVuY3Rpb24gY29tcGxldGVzIHRoZSB2YWx1ZSBpbiB0aGUgaW5kaWNhdGVkIGlucHV0ZS5cclxuSW4gdGhpcyBhcHBsaWNhdGlvbiwgdGhlIHZhbHVlIGZyb20gdGhlIGhpZGRlbiBpbnB1dHMgd2lsbCBsYXRlciBcclxuYmUgcGFzc2VkIHZpYSBQT1NUIG1ldGhvZCB0byB0aGUgUEhQIHNjcmlwdC5cclxuKi9cclxuY29uc3QgY2hhbmdlVmFsdWVJbkhpZGRlbklucHV0ID0gKHZhbHVlU3RyaW5nLCBpbnB1dElkU3RyaW5nKSA9PiB7XHJcblx0Y29uc3QgaW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGlucHV0SWRTdHJpbmcpO1xyXG5cdGlucHV0LnZhbHVlID0gdmFsdWVTdHJpbmc7XHJcbn07XHJcblxyXG4vKiBcclxucGFyc2VBbW91bnRUb0NvdW50KHZhbHVlKVxyXG5UaGlzIGZ1bmN0aW9uIHRha2VzIGFuIGFtb3VudCAoc3JpbmcpIGFuZCBjb252ZXJ0cyBpdCB0byBhIG51bWJlci5cclxuRS5nLi4gXHJcbicxMi45OSAkJyA+Pj4gMTIuOTlcclxuJzE1ICQnID4+PiAxNVxyXG4qL1xyXG5jb25zdCBwYXJzZUFtb3VudFRvQ291bnQgPSAodmFsdWUpID0+IHtcclxuXHQvLyBpZiBzdHJpbmcgY29udmVydCB0byBudW1iZXJcclxuXHRpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xyXG5cdFx0dmFsdWUgPSB2YWx1ZS5yZXBsYWNlKCcsJywgJy4nKTtcclxuXHRcdHZhbHVlID0gcGFyc2VGbG9hdCh2YWx1ZSk7XHJcblx0fVxyXG5cclxuXHQvLyByb3VuZCB0byB0d28gZGVjaW1hbCBwbGFjZXNcclxuXHRpZiAodmFsdWUgJSAxID09PSAwKSB7XHJcblx0XHR2YWx1ZSA9IHZhbHVlLnRvRml4ZWQoMik7IC8vIGNoYW5nZXMgdG8gc3RyaW5nXHJcblx0XHR2YWx1ZSA9IHBhcnNlRmxvYXQodmFsdWUpO1xyXG5cdH1cclxuXHJcblx0cmV0dXJuIHZhbHVlO1xyXG59O1xyXG5cclxuLypcclxuY29udmVydE51bXRvQW1vdW50KG51bWJlciwgc3RyaW5nKVxyXG5UaGlzIGZ1bmN0aW9uIHRha2VzIGEgbnVtYmVyLCByb3VuZHMgaXQgdG8gdHdvIGRlY2ltYWwgcGxhY2VzLCBcclxuYWRkcyBhIGN1cnJlbmN5IG5vdGF0aW9uIGFuZCBjb252ZXJ0cyB0aGUgcGVyaW9kIHRvIGEgY29tbWFcclxuKi9cclxuY29uc3QgY29udmVydE51bXRvQW1vdW50ID0gKG51bSwgY3VycmVuY3lTdHJpbmcpID0+IHtcclxuXHRudW0gPSBudW0udG9GaXhlZCgyKTtcclxuXHRudW0gKz0gJyAnICsgY3VycmVuY3lTdHJpbmc7XHJcblx0bnVtID0gbnVtLnJlcGxhY2UoJy4nLCAnLCcpO1xyXG5cclxuXHRyZXR1cm4gbnVtO1xyXG59O1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIFVQREFURSBEQVRBIElOIFNFUlZJQ0UgVEFCTEVcclxuY29uc3QgdXBkYXRlU2VydmljZXNUYWJsZSA9ICgpID0+IHtcclxuXHR1cGRhdGVJdGVtc051bWJlcnMoKTtcclxuXHRzaG93RW1wdHlJbmZvKCk7XHJcblx0Y2FsY3VsYXRlVGFibGVTdW1tYXJ5KCk7XHJcbn07XHJcblxyXG5jb25zdCB1cGRhdGVJdGVtc051bWJlcnMgPSAoKSA9PiB7XHJcblx0Y29uc3QgaXRlbXNOb1NwYW5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcclxuXHRcdCcuaW52b2ljZS1lZGl0X19mb3JtLWJveC1zZXJ2aWNlcy10YWJsZSAuc2VydmljZS1pdGVtLW51bWJlcidcclxuXHQpO1xyXG5cclxuXHRjb25zdCBwb3NpdGlvbkhpZGRlbklucHV0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXHJcblx0XHQnLnBvc2l0aW9uLWhpZGRlbi1pbnB1dCdcclxuXHQpO1xyXG5cclxuXHRmb3IgKGxldCBpID0gMDsgaSA8IGl0ZW1zTm9TcGFucy5sZW5ndGg7IGkrKykge1xyXG5cdFx0aXRlbXNOb1NwYW5zW2ldLnRleHRDb250ZW50ID0gaSArIDE7XHJcblx0fVxyXG5cclxuXHRmb3IgKGxldCBpID0gMDsgaSA8IHBvc2l0aW9uSGlkZGVuSW5wdXRzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRwb3NpdGlvbkhpZGRlbklucHV0c1tpXS52YWx1ZSA9IGkgKyAxO1xyXG5cdH1cclxufTtcclxuXHJcbmNvbnN0IHNob3dFbXB0eUluZm8gPSAoKSA9PiB7XHJcblx0Y29uc3Qgc2VydmljZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjc2VydmljZXMtdGFibGUgdGJvZHkgdHInKTtcclxuXHRjb25zdCBlbXB0eUluZm8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2VydmljZXMtdGFibGUgdGJvZHkgLmVtcHR5LWluZm8nKTtcclxuXHRlbXB0eUluZm8uc3R5bGUuZGlzcGxheSA9IHNlcnZpY2VzLmxlbmd0aCA9PT0gMSA/ICdncmlkJyA6ICdub25lJztcclxufTtcclxuXHJcbmNvbnN0IGNhbGN1bGF0ZVRhYmxlU3VtbWFyeSA9ICgpID0+IHtcclxuXHRzdW1VcFZhbHVlcygnLnNlcnZpY2UtaXRlbS1uZXQtc3VtJywgJy5pbnZvaWNlLXRvdGFsLW5ldCcpO1xyXG5cdHN1bVVwVmFsdWVzKCcuc2VydmljZS1pdGVtLWdyb3NzLXN1bScsICcuaW52b2ljZS10b3RhbC1ncm9zcycpO1xyXG59O1xyXG5cclxuY29uc3Qgc3VtVXBWYWx1ZXMgPSAoaW5wdXRzQXJyU2VsZWN0b3JBbGwsIG91dHB1dFNwYW5TZWxlY3RvcikgPT4ge1xyXG5cdGNvbnN0IGlucHV0c0FyciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoaW5wdXRzQXJyU2VsZWN0b3JBbGwpO1xyXG5cdGNvbnN0IG91dHB1dFNwYW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG91dHB1dFNwYW5TZWxlY3Rvcik7XHJcblxyXG5cdGxldCBzdW0gPSAwO1xyXG5cdGlucHV0c0Fyci5mb3JFYWNoKChlbCkgPT4ge1xyXG5cdFx0c3VtICs9IHBhcnNlRmxvYXQoZWwudmFsdWUucmVwbGFjZSgnLCcsICcuJykpO1xyXG5cdH0pO1xyXG5cclxuXHRvdXRwdXRTcGFuLnRleHRDb250ZW50ID0gYCR7c3VtLnRvRml4ZWQoMil9ICRgLnJlcGxhY2UoJy4nLCAnLCcpO1xyXG5cdHVwZGF0ZUFsbEhpZGRlbklucHV0VmFsdWVzKCk7XHJcbn07XHJcblxyXG5jb25zdCB1cGRhdGVBbGxIaWRkZW5JbnB1dFZhbHVlcyA9ICgpID0+IHtcclxuXHRjb25zdCB0b3RhbEdyb3NzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmludm9pY2UtdG90YWwtZ3Jvc3MnKTtcclxuXHRjb25zdCB0b3RhbEdyb3NzTnVtID0gcGFyc2VBbW91bnRUb0NvdW50KHRvdGFsR3Jvc3MudGV4dENvbnRlbnQpO1xyXG5cclxuXHRjb25zdCB0b3RhbE5ldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbnZvaWNlLXRvdGFsLW5ldCcpO1xyXG5cdGNvbnN0IHRvdGFsTmV0TnVtID0gcGFyc2VBbW91bnRUb0NvdW50KHRvdGFsTmV0LnRleHRDb250ZW50KTtcclxuXHJcblx0Y2hhbmdlVmFsdWVJbkhpZGRlbklucHV0KHRvdGFsR3Jvc3NOdW0sICcjdG90YWwtZ3Jvc3MnKTtcclxuXHRjaGFuZ2VWYWx1ZUluSGlkZGVuSW5wdXQodG90YWxHcm9zc051bSwgJyN0by1wYXktbnVtZXJpYycpO1xyXG5cdGNoYW5nZVZhbHVlSW5IaWRkZW5JbnB1dCh2ZXJiYWxOb3RhdGlvbih0b3RhbEdyb3NzTnVtKSwgJyN0by1wYXktdmVyYmFsJyk7XHJcblx0Y2hhbmdlVmFsdWVJbkhpZGRlbklucHV0KHRvdGFsTmV0TnVtLCAnI3RvdGFsLW5ldCcpO1xyXG59O1xyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIHVwZGF0ZVNlcnZpY2VzVGFibGUpO1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIEFERCBORVcgU0VSVklDRSBUUiBJTiBUQUJMRVxyXG5jb25zdCBhZGROZXdTZXJ2aWNlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5ldy1zZXJ2aWNlLWJ0bicpO1xyXG5cclxuY29uc3QgY3JlYXRlTmV3U2VydmljZSA9IChlKSA9PiB7XHJcblx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuXHRjb25zdCBzZXJ2aWNlc1Rib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NlcnZpY2VzLXRhYmxlIHRib2R5Jyk7XHJcblx0Y29uc3Qgc2VydmljZXNMZW5ndGggPSBzZXJ2aWNlc1Rib2R5LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RyJykubGVuZ3RoO1xyXG5cclxuXHRjb25zdCBuZXdJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTtcclxuXHRjb25zdCBpdGVtTm9TcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcclxuXHRpdGVtTm9TcGFuLmlubmVySFRNTCA9IGA8c3BhbiBjbGFzcz1cInNlcnZpY2UtdGl0bGUtLW1vYmlsZVwiPk5vLjogPC9zcGFuPjxzcGFuIGNsYXNzPVwic2VydmljZS1pdGVtLW51bWJlclwiPjwvc3Bhbj5cclxuPGlucHV0IGhpZGRlbiBjbGFzcz1cInBvc2l0aW9uLWhpZGRlbi1pbnB1dFwiIHR5cGU9XCJ0ZXh0XCIgbmFtZT1cInBvc2l0aW9uWyR7c2VydmljZXNMZW5ndGh9XVwiIHZhbHVlPVwiXCI+PC9pbnB1dD5gO1xyXG5cclxuXHRjb25zdCBzZXJ2aWNlTmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XHJcblx0c2VydmljZU5hbWUuaW5uZXJIVE1MID0gYDxzcGFuIGNsYXNzPVwic2VydmljZS10aXRsZS0tbW9iaWxlXCI+SXRlbSAvIHNlcnZpY2U6IDwvc3Bhbj5cclxuPGlucHV0IGNsYXNzPVwic2VydmljZS1pdGVtLW5hbWVcIiAgdHlwZT1cInRleHRcIiBuYW1lPVwic2VydmljZV9uYW1lWyR7c2VydmljZXNMZW5ndGh9XVwiPmA7XHJcblxyXG5cdGNvbnN0IGFjdGl2aXR5Q29kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XHJcblx0YWN0aXZpdHlDb2RlLmlubmVySFRNTCA9IGA8c3BhbiBjbGFzcz1cInNlcnZpY2UtdGl0bGUtLW1vYmlsZVwiPlNlcnZpY2UgY29kZTogPC9zcGFuPlxyXG48aW5wdXQgY2xhc3M9XCJzZXJ2aWNlLWl0ZW0tY29kZVwiIHR5cGU9XCJ0ZXh0XCIgbmFtZT1cInNlcnZpY2VfY29kZVske3NlcnZpY2VzTGVuZ3RofV1cIj5gO1xyXG5cclxuXHRjb25zdCBhbW91bnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xyXG5cdGFtb3VudC5pbm5lckhUTUwgPSBgPHNwYW4gY2xhc3M9XCJzZXJ2aWNlLXRpdGxlLS1tb2JpbGVcIj5RdWFudGl0eTogPC9zcGFuPlxyXG48aW5wdXQgdHlwZT1cIm51bWJlclwiIHZhbHVlPVwiMVwiIG1pbj1cIjBcIiBjbGFzcz1cInNlcnZpY2UtaXRlbS1hbW91bnRcIiBuYW1lPVwicXVhbnRpdHlbJHtzZXJ2aWNlc0xlbmd0aH1dXCI+YDtcclxuXHJcblx0Y29uc3QgbmV0VmFsdWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xyXG5cdG5ldFZhbHVlLmlubmVySFRNTCA9IGA8c3BhbiBjbGFzcz1cInNlcnZpY2UtdGl0bGUtLW1vYmlsZVwiPk5ldCBwcmljZSAoJCk6IDwvc3Bhbj5cclxuPGlucHV0IHR5cGU9XCJudW1iZXJcIiBtaW49XCIwXCIgdmFsdWU9XCIwLjAwXCIgY2xhc3M9XCJzZXJ2aWNlLWl0ZW0tbmV0LXZhbHVlXCIgbmFtZT1cIml0ZW1fbmV0X3ByaWNlWyR7c2VydmljZXNMZW5ndGh9XVwiIHN0ZXA9XCIuMDFcIj5gO1xyXG5cclxuXHRjb25zdCB0YXhWYWx1ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XHJcblx0dGF4VmFsdWUuaW5uZXJIVE1MID0gYDxzcGFuIGNsYXNzPVwic2VydmljZS10aXRsZS0tbW9iaWxlXCI+VGF4OiA8L3NwYW4+XHJcbjxzZWxlY3QgY2xhc3M9XCJzZXJ2aWNlLWl0ZW0tdGF4XCIgbmFtZT1cInNlcnZpY2VfdGF4WyR7c2VydmljZXNMZW5ndGh9XVwiPlxyXG5cdDxvcHRpb24gdmFsdWU9XCIwXCI+dGF4LWZyZWU8L29wdGlvbj5cclxuXHQ8b3B0aW9uIHZhbHVlPVwiMC4wOFwiPjglPC9vcHRpb24+XHJcblx0PG9wdGlvbiB2YWx1ZT1cIjAuMjNcIj4yMyU8L29wdGlvbj5cclxuPC9zZWxlY3Q+YDtcclxuXHJcblx0Y29uc3QgbmV0U3VtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcclxuXHRuZXRTdW0uaW5uZXJIVE1MID0gYDxzcGFuIGNsYXNzPVwic2VydmljZS10aXRsZS0tbW9iaWxlXCI+TmV0IHN1bSAoJCk6IDwvc3Bhbj5cclxuPGlucHV0IHR5cGU9XCJ0ZXh0XCIgdmFsdWU9XCIwLjAwICRcIiBjbGFzcz1cInNlcnZpY2UtaXRlbS1uZXQtc3VtXCIgbmFtZT1cInNlcnZpY2VfdG90YWxfbmV0WyR7c2VydmljZXNMZW5ndGh9XVwiIHJlYWRvbmx5PmA7XHJcblxyXG5cdGNvbnN0IGdyb3NzU3VtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcclxuXHRncm9zc1N1bS5pbm5lckhUTUwgPSBgPHNwYW4gY2xhc3M9XCJzZXJ2aWNlLXRpdGxlLS1tb2JpbGVcIj5Hcm9zcyBzdW0gKCQpOiA8L3NwYW4+XHJcbjxpbnB1dCB0eXBlPVwidGV4dFwiIHZhbHVlPVwiMC4wMCAkXCIgY2xhc3M9XCJzZXJ2aWNlLWl0ZW0tZ3Jvc3Mtc3VtXCIgbmFtZT1cInNlcnZpY2VfdG90YWxfZ3Jvc3NbJHtzZXJ2aWNlc0xlbmd0aH1dXCIgcmVhZG9ubHk+YDtcclxuXHJcblx0Y29uc3QgZGVsZXRlQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcclxuXHRkZWxldGVCdG4uaW5uZXJIVE1MID0gYDxidXR0b24gY2xhc3M9XCJkZWxldGUtYnRuXCI+XHJcbjxpIGNsYXNzPVwiZmEtc29saWQgZmEtdHJhc2hcIj48L2k+RGVsZXRlPC9idXR0b24+YDtcclxuXHJcblx0bmV3SXRlbS5hcHBlbmQoXHJcblx0XHRpdGVtTm9TcGFuLFxyXG5cdFx0c2VydmljZU5hbWUsXHJcblx0XHRhY3Rpdml0eUNvZGUsXHJcblx0XHRhbW91bnQsXHJcblx0XHRuZXRWYWx1ZSxcclxuXHRcdHRheFZhbHVlLFxyXG5cdFx0bmV0U3VtLFxyXG5cdFx0Z3Jvc3NTdW0sXHJcblx0XHRkZWxldGVCdG5cclxuXHQpO1xyXG5cdHNlcnZpY2VzVGJvZHkuYXBwZW5kKG5ld0l0ZW0pO1xyXG5cclxuXHR1cGRhdGVTZXJ2aWNlc1RhYmxlKCk7XHJcbn07XHJcblxyXG5hZGROZXdTZXJ2aWNlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGNyZWF0ZU5ld1NlcnZpY2UoZSkpO1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIFVQREFURSBWQUxVRVMgSU4gU0VSVklDRSBUUiBBRlRFUiBDSEFOR0VTIElOIElOUFVUXHJcbmNvbnN0IHVwZGF0ZVNlcnZpY2VUciA9IChzZXJ2aWNlVHIpID0+IHtcclxuXHRjb25zdCBxdWFudGl0eSA9IHNlcnZpY2VUci5xdWVyeVNlbGVjdG9yKCcuc2VydmljZS1pdGVtLWFtb3VudCcpLnZhbHVlO1xyXG5cdGNvbnN0IG5ldFBlck9uZVBpZWNlID0gc2VydmljZVRyLnF1ZXJ5U2VsZWN0b3IoXHJcblx0XHQnLnNlcnZpY2UtaXRlbS1uZXQtdmFsdWUnXHJcblx0KS52YWx1ZTtcclxuXHRjb25zdCB0YXggPSBzZXJ2aWNlVHIucXVlcnlTZWxlY3RvcignLnNlcnZpY2UtaXRlbS10YXgnKS52YWx1ZTtcclxuXHRjb25zdCBuZXQgPSBzZXJ2aWNlVHIucXVlcnlTZWxlY3RvcignLnNlcnZpY2UtaXRlbS1uZXQtc3VtJyk7XHJcblx0Y29uc3QgZ3Jvc3MgPSBzZXJ2aWNlVHIucXVlcnlTZWxlY3RvcignLnNlcnZpY2UtaXRlbS1ncm9zcy1zdW0nKTtcclxuXHJcblx0Ly8gQ2FsY3VsYXRlIHRvdGFsIG5ldCBmb3Igb25lIHNlcnZpY2VUclxyXG5cdG5ldC52YWx1ZSA9IGNvbnZlcnROdW10b0Ftb3VudChxdWFudGl0eSAqIG5ldFBlck9uZVBpZWNlLCAnJCcpO1xyXG5cclxuXHQvLyBDYWxjdWxhdGUgdG90YWwgZ3Jvc3MgZm9yIG9uZSBzZXJ2aWNlVHJcclxuXHRjb25zdCB0b3RhbEdyb3NzID1cclxuXHRcdHBhcnNlQW1vdW50VG9Db3VudCh0YXgpICogcGFyc2VBbW91bnRUb0NvdW50KG5ldC52YWx1ZSkgK1xyXG5cdFx0cGFyc2VBbW91bnRUb0NvdW50KG5ldC52YWx1ZSk7XHJcblxyXG5cdGdyb3NzLnZhbHVlID0gY29udmVydE51bXRvQW1vdW50KHRvdGFsR3Jvc3MsICckJyk7XHJcblxyXG5cdC8vIFN1bSB1cCB0aGUgdGFibGVcclxuXHRjYWxjdWxhdGVUYWJsZVN1bW1hcnkoKTtcclxufTtcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKGUpID0+IHtcclxuXHRpZiAoXHJcblx0XHRlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3NlcnZpY2UtaXRlbS1hbW91bnQnKSB8fFxyXG5cdFx0ZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdzZXJ2aWNlLWl0ZW0tbmV0LXZhbHVlJykgfHxcclxuXHRcdGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnc2VydmljZS1pdGVtLXRheCcpXHJcblx0KSB7XHJcblx0XHR1cGRhdGVTZXJ2aWNlVHIoZS50YXJnZXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50KTtcclxuXHR9XHJcbn0pO1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIERFTEVURSBTRVJWSUNFIFRSIEZST00gVEFCTEVcclxuY29uc3QgZGVsZXRlU2VydmljZUl0ZW0gPSAoc2VydmljZVRyKSA9PiB7XHJcblx0c2VydmljZVRyLm91dGVySFRNTCA9ICcnO1xyXG5cdHVwZGF0ZVNlcnZpY2VzVGFibGUoKTtcclxufTtcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuXHRpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdkZWxldGUtYnRuJykpIHtcclxuXHRcdGRlbGV0ZVNlcnZpY2VJdGVtKGUudGFyZ2V0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudCk7XHJcblx0fVxyXG59KTtcclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBCTE9DSyBUSEUgRk9STSBCRUlORyBTRU5UIEFVVE9NQVRJQ0FMTFkgQUZURVIgUFJFU1MgRU5URVIgSU4gVEVYVEFSRUFcclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7XHJcblx0aWYgKGUua2V5ID09PSAnRW50ZXInICYmIGUudGFyZ2V0LmxvY2FsTmFtZSAhPT0gJ3RleHRhcmVhJykge1xyXG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdH1cclxufSk7Il19
